//Test script to test file creation via Source VScript
//This VScript will simply make a .txt simple text file with no contents

//This function is not called when the .nut is first started, should be triggered by a button in mp_coop_testroom
function test_file_create() {
    try {
        //This should make a txt file with read and write permission, testing still in progress
        EntFire("@command_test_file", "command", "_record test_file")
        EntFire("@command_test_file", "command", "stop")
        printl("file created succesfully")
        EntFire("@command_test_file", "command", "ent_create_portal_weighted_cube")
    } catch (e) {
        //this gets thrown if it fails to create the file
        printl("file failed to create")
        throw e
    }
}

/*
This next part should load with mapspawn.nut, if the .nut loads it will spawn a sphere
Else it will either send to the console it failed
*/
try {
    EntFire("@command_test_file", "command," "ent_create_portal_weighted_sphere", 10)
    printl("Sphere made")
} catch (e) {
    // A fallback is used if SendToConsoleP232 doesn't work properly
     throw e
    try {
        printl("EntFire failed, using fallback command")
        SendToConsoleP232("ent_create_portal_weighted_sphere", 5)
        printl("Sphere made via fallback")
    } catch (e) {
        //This should only happen if everything fricks up
        printl("FATAL!!! COMMANDS FAILED!!! NUT LOADED BUT BOTH SPHERE CREATIONS FAILED!")
        throw e
    }
 }